<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ペット共生住宅事業ワークフロー</title>
    <style>
        body {
            font-family: 'Hiragino Sans', 'Yu Gothic', 'Meiryo', sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
            min-height: 100vh;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(255, 182, 193, 0.3);
            backdrop-filter: blur(10px);
        }
        
        h1 {
            text-align: center;
            color: #8b4513;
            margin-bottom: 40px;
            font-size: 2.8em;
            font-weight: 600;
            text-shadow: 2px 2px 4px rgba(255, 182, 193, 0.3);
        }
        
        .workflow-container {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }
        
        .phase {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            padding: 30px;
            border: 3px solid;
            position: relative;
            transition: all 0.4s ease;
            cursor: pointer;
            overflow: hidden;
        }
        
        .phase::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.8), transparent);
            animation: shimmer 3s infinite;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .phase:hover {
            transform: translateY(-5px) scale(1.01);
            box-shadow: 0 15px 40px rgba(255, 182, 193, 0.4);
        }
        
        .phase.completed {
            opacity: 0.8;
            background: linear-gradient(135deg, #c8e6c9, #a5d6a7);
            border-color: #4caf50;
        }
        
        .phase-1 { 
            border-color: #ff6b9d; 
            background: linear-gradient(135deg, #ffe0e6, #ffb3c6);
        }
        .phase-2 { 
            border-color: #4ecdc4; 
            background: linear-gradient(135deg, #e0f2f1, #b2dfdb);
        }
        .phase-3 { 
            border-color: #45b7d1; 
            background: linear-gradient(135deg, #e1f5fe, #b3e5fc);
        }
        .phase-4 { 
            border-color: #f9ca24; 
            background: linear-gradient(135deg, #fff8e1, #ffecb3);
        }
        .phase-5 { 
            border-color: #a55eea; 
            background: linear-gradient(135deg, #f3e5f5, #e1bee7);
        }
        
        .phase-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        
        .phase-title {
            font-size: 1.9em;
            font-weight: 600;
            color: #5d4e75;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .phase-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4em;
            color: white;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .phase-checkbox {
            width: 30px;
            height: 30px;
            border: 3px solid #ddd;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }
        
        .phase-checkbox:hover {
            border-color: #4caf50;
            transform: scale(1.1);
        }
        
        .phase-checkbox.checked {
            background: #4caf50;
            border-color: #4caf50;
            color: white;
        }
        
        .departments {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-top: 25px;
        }
        
        .department {
            background: rgba(255,255,255,0.95);
            border-radius: 18px;
            padding: 25px;
            border: 2px solid #f0f0f0;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(0,0,0,0.08);
        }
        
        .department:hover {
            border-color: #ff9a9e;
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(255, 154, 158, 0.2);
        }
        
        .dept-title {
            font-size: 1.4em;
            font-weight: 600;
            color: #5d4e75;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .dept-icon {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1em;
            color: white;
            font-weight: bold;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        }
        
        .marketing { background: linear-gradient(135deg, #ff6b9d, #ff8fab); }
        .branding { background: linear-gradient(135deg, #4ecdc4, #44a08d); }
        .product { background: linear-gradient(135deg, #45b7d1, #2196f3); }
        .sales { background: linear-gradient(135deg, #f9ca24, #f39c12); }
        .support { background: linear-gradient(135deg, #a55eea, #9b59b6); }
        
        .task-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .task-item {
            padding: 12px 0;
            border-bottom: 1px solid #f0f0f0;
            position: relative;
            padding-left: 35px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .task-item:hover {
            background: rgba(255, 182, 193, 0.1);
            padding-left: 40px;
        }
        
        .task-item:last-child {
            border-bottom: none;
        }
        
        .task-item.priority-high {
            border-left: 4px solid #e74c3c;
            background: linear-gradient(90deg, rgba(231, 76, 60, 0.1), transparent);
        }
        
        .task-item.priority-medium {
            border-left: 4px solid #f39c12;
            background: linear-gradient(90deg, rgba(243, 156, 18, 0.1), transparent);
        }
        
        .task-item.parallel {
            border-right: 4px solid #3498db;
            background: linear-gradient(270deg, rgba(52, 152, 219, 0.1), transparent);
        }
        
        .task-checkbox {
            position: absolute;
            left: 5px;
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            border: 2px solid #ddd;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            transition: all 0.3s ease;
            background: white;
        }
        
        .task-checkbox:hover {
            border-color: #4caf50;
            transform: translateY(-50%) scale(1.1);
        }
        
        .task-checkbox.checked {
            background: #4caf50;
            border-color: #4caf50;
            color: white;
        }
        
        .task-item.completed {
            opacity: 0.6;
            text-decoration: line-through;
        }
        
        .dependency-line {
            position: absolute;
            width: 2px;
            background: linear-gradient(to bottom, #3498db, transparent);
            left: 15px;
            top: 100%;
            height: 20px;
            z-index: 1;
        }
        
        .flow-arrow {
            text-align: center;
            font-size: 2.5em;
            color: #ff9a9e;
            margin: 15px 0;
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .legend {
            background: linear-gradient(135deg, #5d4e75, #8b7ca3);
            color: white;
            padding: 30px;
            border-radius: 20px;
            margin-top: 40px;
            box-shadow: 0 10px 30px rgba(93, 78, 117, 0.3);
        }
        
        .legend h3 {
            margin-top: 0;
            margin-bottom: 20px;
            color: #fff;
            font-size: 1.5em;
        }
        
        .legend-items {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 10px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
        }
        
        .legend-color {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }
        
        .current-status {
            position: fixed;
            top: 30px;
            right: 30px;
            background: linear-gradient(135deg, #5d4e75, #8b7ca3);
            color: white;
            padding: 20px 25px;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(93, 78, 117, 0.3);
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        
        .current-status:hover {
            transform: scale(1.05);
            box-shadow: 0 12px 35px rgba(93, 78, 117, 0.4);
        }
        
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #4caf50;
            display: inline-block;
            margin-right: 10px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.2); }
        }
        
        /* モーダル詳細表示 */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            backdrop-filter: blur(5px);
        }
        
        .modal-content {
            background: white;
            margin: 3% auto;
            padding: 30px;
            border-radius: 20px;
            width: 85%;
            max-width: 800px;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            animation: modalSlideIn 0.3s ease;
        }
        
        @keyframes modalSlideIn {
            from { opacity: 0; transform: translateY(-50px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s ease;
        }
        
        .close:hover {
            color: #ff6b9d;
        }
        
        .task-detail {
            margin: 15px 0;
            padding: 20px;
            border-radius: 15px;
            border-left: 5px solid;
        }
        
        .task-detail.content {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border-left-color: #2196f3;
        }
        
        .task-detail.dependencies {
            background: linear-gradient(135deg, #fff3e0, #ffcc02);
            border-left-color: #ff9800;
        }
        
        .task-detail.deliverables {
            background: linear-gradient(135deg, #e8f5e8, #c8e6c9);
            border-left-color: #4caf50;
        }
        
        .task-detail.timeline {
            background: linear-gradient(135deg, #fce4ec, #f8bbd9);
            border-left-color: #e91e63;
        }
        
        .task-detail h4 {
            margin: 0 0 10px 0;
            color: #5d4e75;
            font-size: 1.2em;
        }
        
        .task-detail p, .task-detail ul {
            margin: 0;
            color: #666;
        }
        
        .task-detail ul {
            padding-left: 20px;
        }
        
        .progress-bar {
            width: 100%;
            height: 20px;
            background: #f0f0f0;
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff6b9d, #4ecdc4);
            border-radius: 10px;
            transition: width 0.8s ease;
            position: relative;
        }
        
        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: progressShimmer 2s infinite;
        }
        
        @keyframes progressShimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .priority-legend {
            background: linear-gradient(135deg, #34495e, #2c3e50);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
        }
        
        .priority-legend h4 {
            margin: 0 0 15px 0;
            color: #ecf0f1;
        }
        
        .priority-items {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .priority-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
        }
        
        .priority-indicator {
            width: 20px;
            height: 4px;
            border-radius: 2px;
        }
        
        .high { background: #e74c3c; }
        .medium { background: #f39c12; }
        .parallel { background: #3498db; }
        
        @media (max-width: 768px) {
            .departments {
                grid-template-columns: 1fr;
            }
            
            .current-status {
                position: relative;
                top: auto;
                right: auto;
                margin-bottom: 20px;
            }
            
            .modal-content {
                width: 95%;
                margin: 10% auto;
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🏠🐕 ペット共生住宅事業ワークフロー</h1>
        
        <div class="current-status" onclick="highlightCurrentPhase()">
            <span class="status-indicator"></span>
            現在のフェーズ: フェーズ選択
        </div>
        
        <div class="workflow-container">
            <!-- フェーズ1: 市場調査・戦略策定 -->
            <div class="phase phase-1" data-phase="1">
                <div class="phase-header">
                    <div class="phase-title">
                        <div class="phase-icon" style="background: linear-gradient(135deg, #ff6b9d, #ff8fab);">1</div>
                        市場調査・戦略策定フェーズ
                    </div>
                    <div class="phase-checkbox" onclick="togglePhase(this, event)">
                        ✓
                    </div>
                </div>
                <div class="departments">
                    <div class="department">
                        <div class="dept-title">
                            <div class="dept-icon marketing">M</div>
                            マーケティング
                        </div>
                        <ul class="task-list">
                            <li class="task-item priority-high" onclick="showTaskDetail('TAM/SAM/SOM分析とペット市場セグメンテーション', 'ペット飼育世帯のTotal Addressable Market、Serviceable Available Market、Serviceable Obtainable Marketを算出し、犬種別・猫種別・地域別の詳細なセグメント分析を実施。平均世帯年収、住宅購入予算、ペット関連支出額、住宅購入時の優先事項をクロス分析。', ['フェーズ2の商品開発仕様策定'], ['市場規模レポート', 'セグメント別顧客プロファイル', 'TAM/SAM/SOM算出シート'], '2-3週間', ['競合分析','ターゲット設定'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                TAM/SAM/SOM分析とペット市場セグメンテーション
                            </li>
                            <li class="task-item priority-high" onclick="showTaskDetail('競合分析・差別化戦略策定', '直接競合（積水ハウス「ペットと暮らす家」等）、間接競合（リフォーム業者、ペット用品メーカー）の価格、機能、マーケティング戦略を分析。SWOT分析により自社の差別化ポイントを明確化し、Blue Ocean Strategy を策定。', ['TAM/SAM/SOM分析'], ['競合分析レポート', 'SWOT分析', '差別化戦略書', 'ポジショニングマップ'], '2週間', ['市場分析','ブランド戦略'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                競合分析・差別化戦略策定
                            </li>
                            <li class="task-item priority-medium parallel" onclick="showTaskDetail('ペルソナ設定・カスタマージャーニーマッピング', '定量・定性調査に基づく詳細ペルソナ設計（デモグラフィック、サイコグラフィック、行動特性）。住宅購入検討から入居後までのカスタマージャーニーマップ作成。各タッチポイントでの感情変化、ペインポイント、機会を特定。', ['TAM/SAM/SOM分析', 'ブランドコンセプト策定'], ['ペルソナシート', 'カスタマージャーニーマップ', 'タッチポイント分析', 'ペインポイント一覧'], '3週間', ['UX設計','コンテンツ戦略'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                ペルソナ設定・カスタマージャーニーマッピング
                            </li>
                            <li class="task-item priority-medium" onclick="showTaskDetail('価格戦略・収益モデル設計', 'Value-Based Pricing によるプライシング戦略。初期販売価格、オプション価格、アフターサービス料金体系の設計。LTV（生涯顧客価値）算出と収益最大化モデルの構築。価格感度分析とPSM分析の実施。', ['競合分析', '商品仕様策定'], ['価格戦略書', '収益モデル', 'LTV算出シート', 'PSM分析結果'], '2週間', ['財務計画','営業戦略'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                価格戦略・収益モデル設計
                            </li>
                            <li class="task-item priority-medium" onclick="showTaskDetail('Go-to-Market戦略・KPI設計', '市場参入戦略とローンチ計画の策定。認知度、考慮率、購入意向率、NPS等のKPI設定。マーケティングファネル設計とコンバージョン率目標設定。チャネル戦略とパートナーシップ戦略の策定。', ['差別化戦略', 'ペルソナ設定'], ['GTM戦略書', 'KPIダッシュボード', 'ローンチ計画', 'チャネル戦略'], '3週間', ['営業戦略','マーケティング実行'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                Go-to-Market戦略・KPI設計
                            </li>
                        </ul>
                    </div>
                    <div class="department">
                        <div class="dept-title">
                            <div class="dept-icon branding">B</div>
                            ブランディング
                        </div>
                        <ul class="task-list">
                            <li class="task-item priority-high parallel" onclick="showTaskDetail('ブランド戦略・アーキテクチャ設計', 'ブランドピラミッド（機能的価値・感情的価値・自己表現価値）の構築。ブランドパーパス、ビジョン、ミッション、バリューの策定。マスターブランドとプロダクトブランドの関係性設計。ブランドエクイティ向上戦略の策定。', ['競合分析'], ['ブランド戦略書', 'ブランドピラミッド', 'ブランドアーキテクチャ図', 'バリュープロポジション'], '3週間', ['コンセプト開発','VI設計'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                ブランド戦略・アーキテクチャ設計
                            </li>
                            <li class="task-item priority-high" onclick="showTaskDetail('ネーミング・ロゴ・VI開発', '商標調査を含む戦略的ネーミング開発。ペットとの共生を表現するロゴデザイン。企業・商品VIシステム（カラーパレット、タイポグラフィ、グラフィック要素）の構築。ブランドガイドライン作成。', ['ブランド戦略設計'], ['ネーミング案', 'ロゴデザイン', 'VIマニュアル', 'ブランドガイドライン'], '4週間', ['マーケティング素材制作'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                ネーミング・ロゴ・VI開発
                            </li>
                            <li class="task-item priority-medium" onclick="showTaskDetail('ブランドメッセージ・トーン設計', 'コアメッセージとサブメッセージの開発。ターゲット別メッセージング戦略。ブランドトーン&マナー（親しみやすさ、専門性、信頼性のバランス）の設定。キーワード・フレーズバンクの構築。', ['ペルソナ設定', 'ブランド戦略設計'], ['メッセージフレームワーク', 'トーン&マナーガイド', 'キーワードバンク', 'コピーライティングガイド'], '2週間', ['コンテンツ制作','コミュニケーション戦略'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                ブランドメッセージ・トーン設計
                            </li>
                            <li class="task-item priority-medium parallel" onclick="showTaskDetail('ブランド体験設計・CX戦略', '顧客接点全体でのブランド体験設計。物理的接点（ショールーム、モデルハウス）とデジタル接点の統合体験設計。CXジャーニーとブランド体験の一貫性確保。エモーショナル・ブランディング戦略の構築。', ['カスタマージャーニーマッピング', 'ブランドメッセージ設計'], ['CX戦略書', 'ブランド体験設計図', 'タッチポイント設計', 'エモーショナルマップ'], '3週間', ['UX設計','マーケティング実行'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                ブランド体験設計・CX戦略
                            </li>
                            <li class="task-item priority-medium" onclick="showTaskDetail('ブランドKPI・測定フレームワーク構築', 'ブランド認知度、ブランド連想、ブランド好意度、購入意向等の測定指標設定。ブランドトラッキング調査設計。ブランドヘルススコア算出方法の確立。ROI測定とブランド投資効果の可視化。', ['ブランド戦略設計', 'GTM戦略'], ['ブランドKPIフレームワーク', 'トラッキング調査設計', 'ヘルススコア算出表', '測定ダッシュボード'], '2週間', ['効果測定','戦略見直し'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                ブランドKPI・測定フレームワーク構築
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="flow-arrow">🐾</div>
            
            <!-- フェーズ2: 商品開発・設計 -->
            <div class="phase phase-2" data-phase="2">
                <div class="phase-header">
                    <div class="phase-title">
                        <div class="phase-icon" style="background: linear-gradient(135deg, #4ecdc4, #44a08d);">2</div>
                        商品開発・設計フェーズ
                    </div>
                    <div class="phase-checkbox" onclick="togglePhase(this, event)">
                        ✓
                    </div>
                </div>
                <div class="departments">
                    <div class="department">
                        <div class="dept-title">
                            <div class="dept-icon product">P</div>
                            商品開発
                        </div>
                        <ul class="task-list">
                            <li class="task-item priority-high" onclick="showTaskDetail('ペット行動学に基づく設計仕様策定', '動物行動学・獣医学の専門知識を活用した設計。犬種・猫種別の行動パターン分析。ストレス軽減、運動促進、安全確保の観点からの空間設計。IoTセンサーによるペット行動モニタリング機能の検討。', ['市場セグメンテーション', 'ペルソナ設定'], ['設計仕様書', '行動パターン分析レポート', 'IoT機能要件', '安全基準チェックリスト'], '4週間', ['プロトタイプ開発','安全性検証'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                ペット行動学に基づく設計仕様策定
                            </li>
                            <li class="task-item priority-high" onclick="showTaskDetail('革新的ペット共生機能開発', '自動給水・給餌システム、スマートペットドア（顔認証機能付き）、空気清浄・脱臭システム、床暖房・冷却システム、ペット専用エレベーター等の開発。特許出願可能な独自機能の創出。', ['設計仕様策定'], ['機能仕様書', '技術特許申請書', '試作品', '機能テスト結果'], '6週間', ['安全性検証','コスト算出'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                ペット共生家具等開発
                            </li>
                            <li class="task-item priority-high parallel" onclick="showTaskDetail('間取り最適化・空間設計', 'ペットと人の動線分析に基づく間取り設計。ペット専用スペース（プレイルーム、グルーミングルーム）の設計。騒音対策、臭い対策、清掃効率を考慮した材質選定。ユニバーサルデザインの観点も含めた設計。', ['設計仕様策定', 'カスタマージャーニーマッピング'], ['間取り図面', '3D設計図', '動線シミュレーション', '材質仕様書'], '5週間', ['プロトタイプ建設'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                間取り最適化・空間設計
                            </li>
                            <li class="task-item priority-medium" onclick="showTaskDetail('安全性・耐久性検証', 'ペットの安全性試験（咬み傷テスト、引っかきテスト、衝撃テスト）。建築基準法、動物愛護法等の法規制適合性確認。長期耐久性試験とメンテナンス性評価。第三者機関による安全認証取得。', ['ペット共生機能開発'], ['安全性試験レポート', '法規制適合証明', '耐久性試験結果', '安全認証書'], '3週間', ['品質保証','製品化'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                安全性・耐久性検証
                            </li>
                            <li class="task-item priority-medium" onclick="showTaskDetail('原価管理・VE活動', 'Target Costing による原価企画。Value Engineering により機能と コストの最適化。サプライヤーとの協業によるコスト削減。量産効果とスケールメリットの算出。原価低減ロードマップの策定。', ['ペット共生機能開発', '価格戦略設計'], ['原価計算書', 'VE提案書', 'サプライヤー評価', 'コスト削減計画'], '4週間', ['量産準備','利益最適化'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                原価管理・VE活動
                            </li>
                            <li class="task-item priority-high" onclick="showTaskDetail('体験型モデルハウス建設', '顧客体験を最大化するモデルハウス設計。VR/AR技術を活用したバーチャル体験機能。ペット同伴見学対応（一時預かりスペース、プレイエリア）。IoTデモンストレーション、スマートホーム連携の実演環境構築。', ['間取り設計', 'ブランド体験設計'], ['モデルハウス設計図', 'VR/AR体験システム', 'IoTデモ環境', '体験プログラム'], '8週間', ['マーケティング展開','営業活動'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                体験型モデルハウス建設
                            </li>
                        </ul>
                    </div>
                    <div class="department">
                        <div class="dept-title">
                            <div class="dept-icon branding">B</div>
                            ブランディング
                        </div>
                        <ul class="task-list">
                            <li class="task-item priority-medium parallel" onclick="showTaskDetail('プロダクトストーリーテリング', '商品開発ストーリーの構築。開発者・獣医師・ペット飼い主の協働物語。技術革新と愛情の融合をテーマとしたナラティブ開発。エモーショナルな商品価値の言語化とストーリーアーク設計。', ['ブランドメッセージ設計', '設計仕様策定'], ['プロダクトストーリー', 'ナラティブフレームワーク', 'エモーショナルメッセージ', 'ストーリーガイド'], '3週間', ['コンテンツ制作','PR活動'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                プロダクトストーリーテリング
                            </li>
                            <li class="task-item priority-medium" onclick="showTaskDetail('ビジュアルアイデンティティ展開', '商品パッケージング、カタログ、パンフレット等への VI展開。ペットフレンドリーなビジュアル表現の開発。写真撮影・動画制作のクリエイティブディレクション。一貫したビジュアルランゲージの構築。', ['VI開発', 'プロダクトストーリー'], ['商品VI展開案', 'クリエイティブガイド', '撮影ディレクション', 'ビジュアルライブラリ'], '4週間', ['マーケティング素材制作'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                ビジュアルアイデンティティ展開
                            </li>
                            <li class="task-item priority-medium" onclick="showTaskDetail('デジタルプラットフォーム構築', 'レスポンシブWebサイト構築（CMS導入）。SEO最適化とコンテンツマーケティング基盤。AR/VR体験のWebプラットフォーム統合。マーケティングオートメーション連携機能の実装。', ['ブランド体験設計', 'VI展開'], ['Webサイト', 'CMS環境', 'SEO設計', 'MA連携システム'], '6週間', ['デジタルマーケティング','リード獲得'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                デジタルプラットフォーム構築
                            </li>
                            <li class="task-item priority-medium parallel" onclick="showTaskDetail('コンテンツ戦略・制作', 'ペット飼育ノウハウ、住宅メンテナンス、ライフスタイル提案等のコンテンツマーケティング戦略。動画コンテンツ（使用方法、メンテナンス、ライフスタイル）制作。インフルエンサー・専門家との協業コンテンツ企画。', ['ペルソナ設定', 'デジタルプラットフォーム構築'], ['コンテンツ戦略書', '動画コンテンツ', '記事コンテンツ', '専門家コラボ企画'], '5週間', ['SNSマーケティング','SEO対策'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                コンテンツ戦略・制作
                            </li>
                            <li class="task-item priority-high" onclick="showTaskDetail('営業支援ツール開発', 'セールス・イネーブルメントツールの開発。営業プレゼンテーション、提案書テンプレート、ROI計算ツール、競合比較表の作成。営業プロセスとブランド体験の統合設計。', ['ブランド体験設計', 'GTM戦略'], ['営業プレゼン資料', '提案書テンプレート', 'ROI計算ツール', '営業プロセス設計'], '3週間', ['営業チーム研修','セールス活動'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                営業支援ツール開発
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="flow-arrow">🏡</div>
            
            <!-- フェーズ3: マーケティング施策展開 -->
            <div class="phase phase-3" data-phase="3">
                <div class="phase-header">
                    <div class="phase-title">
                        <div class="phase-icon" style="background: linear-gradient(135deg, #45b7d1, #2196f3);">3</div>
                        マーケティング施策展開フェーズ
                    </div>
                    <div class="phase-checkbox" onclick="togglePhase(this, event)">
                        ✓
                    </div>
                </div>
                <div class="departments">
                    <div class="department">
                        <div class="dept-title">
                            <div class="dept-icon marketing">M</div>
                            マーケティング
                        </div>
                        <ul class="task-list">
                            <li class="task-item priority-high parallel" onclick="showTaskDetail('統合デジタルマーケティング戦略実行', 'Google/Yahoo/Facebook/Instagram広告のクロスプラットフォーム展開。リターゲティング、類似オーディエンス、行動ターゲティングの活用。マーケティングファネル最適化とA/Bテスト実施。アトリビューション分析による効果測定。', ['デジタルプラットフォーム構築', 'GTM戦略'], ['広告キャンペーン', 'ターゲティング設定', 'A/Bテスト結果', 'アトリビューション分析'], '継続実行', ['SNSマーケティング','リード育成'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                統合デジタルマーケティング戦略実行
                            </li>
                            <li class="task-item priority-high parallel" onclick="showTaskDetail('SNSマーケティング・コミュニティ構築', 'Instagram/TikTok/YouTubeでのコンテンツマーケティング。ペット系インフルエンサーとのコラボレーション。UGC（User Generated Content）促進キャンペーン。SNSコミュニティマネジメントとエンゲージメント向上施策。', ['コンテンツ戦略', '統合デジタルマーケティング'], ['SNSコンテンツ', 'インフルエンサー契約', 'UGCキャンペーン', 'コミュニティ運営'], '継続実行', ['デジタル広告','ブランド認知'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                SNSマーケティング・コミュニティ構築
                            </li>
                            <li class="task-item priority-medium" onclick="showTaskDetail('戦略的PR・メディアリレーションズ', '建築・住宅・ペット関連メディアとの関係構築。プレスリリース戦略的配信。専門家・オピニオンリーダーとの関係性構築。TV・新聞・雑誌での露出獲得。アーンドメディア効果測定。', ['プロダクトストーリー', 'モデルハウス建設'], ['PRカレンダー', 'メディアリスト', 'プレスリリース', 'メディア露出レポート'], '6週間', ['ブランド認知','信頼性向上'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                戦略的PR・メディアリレーションズ
                            </li>
                            <li class="task-item priority-medium" onclick="showTaskDetail('体験型マーケティング・イベント戦略', 'ペット関連展示会・住宅展示会への戦略的出展。体験型イベント（ペット同伴住宅見学会、セミナー）企画・実施。O2O（Online to Offline）施策によるデジタルとリアルの連携強化。', ['モデルハウス建設', 'イベント企画'], ['出展計画', '体験型イベント', 'O2O施策', 'イベント効果測定'], '3ヶ月', ['リード獲得','ブランド体験'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                体験型マーケティング・イベント戦略
                            </li>
                            <li class="task-item priority-high" onclick="showTaskDetail('マーケティングオートメーション・リード育成', 'MA（HubSpot/Marketo等）によるリード育成フロー構築。スコアリングモデル設計とセグメント別コミュニケーション。メールマーケティング・ナーチャリングキャンペーン実施。営業引き渡し基準とSLA設定。', ['デジタルプラットフォーム構築', '営業支援ツール開発'], ['MAシステム', 'リード育成フロー', 'スコアリングモデル', '営業連携SLA'], '4週間', ['営業連携','コンバージョン向上'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                マーケティングオートメーション・リード育成
                            </li>
                        </ul>
                    </div>
                    <div class="department">
                        <div class="dept-title">
                            <div class="dept-icon branding">B</div>
                            ブランディング
                        </div>
                        <ul class="task-list">
                            <li class="task-item priority-high parallel" onclick="showTaskDetail('ブランド認知度向上・ポジショニング強化', 'ブランドリフト測定による認知度・連想・好意度トラッキング。競合との差別化メッセージの浸透測定。ブランドポジショニングの市場浸透度評価。認知度向上のための統合コミュニケーション戦略実行。', ['ブランドKPI構築', 'PR活動'], ['ブランド調査結果', '認知度レポート', 'ポジショニング効果測定', '改善アクションプラン'], '継続測定', ['市場シェア向上','ブランド価値向上'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                ブランド認知度向上・ポジショニング強化
                            </li>
                            <li class="task-item priority-medium" onclick="showTaskDetail('顧客体験最適化・CRM戦略', 'カスタマー・エクスペリエンス・マネジメント（CXM）による体験最適化。顧客満足度（CSAT）・ネットプロモータースコア（NPS）測定。CRMデータ活用による パーソナライゼーション強化。顧客ライフサイクル管理の高度化。', ['CX戦略', 'MAシステム'], ['CXM戦略', 'CSAT/NPS調査', 'パーソナライゼーション施策', 'ライフサイクル管理'], '継続実行', ['顧客満足度向上','LTV最大化'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                顧客体験最適化・CRM戦略
                            </li>
                            <li class="task-item priority-medium parallel" onclick="showTaskDetail('アドボカシーマーケティング・口コミ戦略', '顧客推奨度向上プログラムの開発。アンバサダープログラムの構築。レビュー・口コミ獲得施策。紹介制度・インセンティブプログラムの設計。ソーシャルプルーフの最大化戦略。', ['SNSコミュニティ構築', 'CXM戦略'], ['アンバサダープログラム', 'レビュー獲得施策', '紹介制度', 'ソーシャルプルーフ戦略'], '6週間', ['信頼性向上','新規獲得促進'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                アドボカシーマーケティング・口コミ戦略
                            </li>
                            <li class="task-item priority-medium" onclick="showTaskDetail('パートナーシップ・アライアンス戦略', 'ペット関連企業（ペット保険、動物病院、ペットホテル等）との戦略的提携。住宅関連パートナー（金融機関、インテリア会社等）との協業企画。クロスマーケティングによる顧客基盤拡大。Win-Winの価値創造モデル構築。', ['GTM戦略', 'PR活動'], ['パートナーシップ契約', 'クロスマーケティング企画', '協業プログラム', '価値創造モデル'], '8週間', ['市場拡大','新規チャネル開拓'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                パートナーシップ・アライアンス戦略
                            </li>
                            <li class="task-item priority-high" onclick="showTaskDetail('ブランドガバナンス・一貫性管理', '全タッチポイントでのブランド体験一貫性確保。ブランドガイドライン遵守状況の監査。社内ブランド浸透・従業員エンゲージメント向上。ブランド毀損リスク管理とクライシスコミュニケーション準備。', ['VI展開', '営業支援ツール開発'], ['ブランド監査レポート', '社内浸透プログラム', 'ガバナンス体制', 'クライシス対応マニュアル'], '継続実行', ['ブランド価値保護','組織力向上'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                ブランドガバナンス・一貫性管理
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="flow-arrow">💰</div>
            
            <!-- フェーズ4: 営業・販売活動 -->
            <div class="phase phase-4" data-phase="4">
                <div class="phase-header">
                    <div class="phase-title">
                        <div class="phase-icon" style="background: linear-gradient(135deg, #f9ca24, #f39c12);">4</div>
                        営業・販売活動フェーズ
                    </div>
                    <div class="phase-checkbox" onclick="togglePhase(this, event)">
                        ✓
                    </div>
                </div>
                <div class="departments">
                    <div class="department">
                        <div class="dept-title">
                            <div class="dept-icon sales">S</div>
                            営業
                        </div>
                        <ul class="task-list">
                            <li class="task-item priority-high" onclick="showTaskDetail('コンサルティング営業体制構築', 'ソリューション営業・コンサルティング営業のスキル体系構築。SPIN営業、チャレンジャー営業手法の導入。営業プロセス標準化（リード獲得→商談→提案→クロージング→アフターフォロー）。CRM/SFA活用による営業活動の可視化・最適化。', ['営業支援ツール開発', 'MAシステム'], ['営業プロセス標準', 'スキル体系', 'CRM/SFA環境', '営業マニュアル'], '4週間', ['営業研修','顧客対応'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                コンサルティング営業体制構築
                            </li>
                            <li class="task-item priority-high" onclick="showTaskDetail('戦略的チャネルパートナーシップ構築', 'ハウスメーカー・工務店・住宅展示場との戦略的提携。不動産仲介業者・住宅ローン会社との協業体制構築。チャネル別インセンティブ設計。パートナー向け研修・サポート体制の整備。', ['パートナーシップ戦略', '営業体制構築'], ['チャネル戦略', 'パートナー契約', 'インセンティブ制度', 'パートナー研修プログラム'], '6週間', ['販売チャネル拡大','売上最大化'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                戦略的チャネルパートナーシップ構築
                            </li>
                            <li class="task-item priority-high parallel" onclick="showTaskDetail('顧客対応・商談・プロポーザル', 'インバウンドリード対応・アウトバウンド営業活動。ニーズヒアリング・課題発見・ソリューション提案。カスタマイズ提案・見積もり作成・契約条件交渉。競合対策・差別化提案・価値訴求の高度化。', ['リード育成', '営業体制構築'], ['商談管理', '提案書', '見積書', '契約書'], '継続実行', ['受注獲得','顧客満足'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                顧客対応・商談・プロポーザル
                            </li>
                            <li class="task-item priority-medium" onclick="showTaskDetail('契約・金融・法務サポート体制', '住宅ローン・ペットローンとの連携体制構築。法務リスク管理・契約書標準化。保証・アフターサービス条件の最適化。顧客与信管理・支払い条件の柔軟化。', ['商談・プロポーザル'], ['契約プロセス', '金融連携体制', '法務体制', '与信管理システム'], '3週間', ['契約率向上','リスク管理'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                契約・金融・法務サポート体制
                            </li>
                            <li class="task-item priority-medium" onclick="showTaskDetail('セールス・パフォーマンス・マネジメント', 'KPI設定（商談件数・成約率・売上・顧客満足度等）・目標管理。営業活動分析・改善施策立案。営業チームの人材育成・スキル向上施策。インセンティブ制度・評価制度の最適化。', ['営業体制構築', '商談活動'], ['KPIダッシュボード', '営業分析レポート', '人材育成計画', 'インセンティブ制度'], '継続実行', ['営業効率向上','チーム力強化'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                セールス・パフォーマンス・マネジメント
                            </li>
                        </ul>
                    </div>
                    <div class="department">
                        <div class="dept-title">
                            <div class="dept-icon marketing">M</div>
                            マーケティング
                        </div>
                        <ul class="task-list">
                            <li class="task-item priority-high parallel" onclick="showTaskDetail('セールス・イネーブルメント', '営業チーム向けトレーニング・コンテンツ開発。競合分析・バトルカード・FAQ作成。営業ツール（提案書テンプレート・ROI計算機等）の提供・更新。営業とマーケティングのSLA（Service Level Agreement）管理。', ['営業支援ツール開発', '営業体制構築'], ['営業研修プログラム', 'バトルカード', '営業ツール', 'SLA管理'], '継続更新', ['営業力向上','連携強化'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                セールス・イネーブルメント
                            </li>
                            <li class="task-item priority-high parallel" onclick="showTaskDetail('リードクオリフィケーション・ナーチャリング', 'MQL（Marketing Qualified Lead）からSQL（Sales Qualified Lead）への転換最適化。リードスコアリング・グレーディングによる優先順位付け。ナーチャリングキャンペーンによる見込み客育成。営業への適切なタイミングでのリード引き渡し。', ['リード育成', '営業体制構築'], ['リードスコアリング', 'ナーチャリング施策', 'MQL→SQL転換率', 'リード品質改善'], '継続実行', ['コンバージョン向上','営業効率化'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                リードクオリフィケーション・ナーチャリング
                            </li>
                            <li class="task-item priority-medium" onclick="showTaskDetail('Account-Based Marketing (ABM)', '大手企業・高価値顧客向けのABM戦略。ターゲットアカウント選定・ペルソナ分析。アカウント別カスタマイズコンテンツ・キャンペーン。営業・マーケティング連携によるアカウント攻略。', ['チャネルパートナーシップ', 'リードクオリフィケーション'], ['ABM戦略', 'ターゲットアカウントリスト', 'カスタマイズコンテンツ', 'アカウント攻略計画'], '8週間', ['大口顧客獲得','売上拡大'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                Account-Based Marketing (ABM)
                            </li>
                            <li class="task-item priority-medium" onclick="showTaskDetail('営業効果測定・ROI最適化', '営業活動ROI測定・分析。マーケティング施策の営業貢献度算出。コンバージョンファネル分析・改善。CAC（Customer Acquisition Cost）とLTV最適化。データドリブンな営業戦略立案。', ['セールスイネーブルメント', 'ABM'], ['ROI分析レポート', 'コンバージョン分析', 'CAC/LTV算出', '改善アクションプラン'], '月次実行', ['営業効率向上','収益最大化'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                営業効果測定・ROI最適化
                            </li>
                            <li class="task-item priority-medium parallel" onclick="showTaskDetail('カスタマーサクセス・オンボーディング', '新規顧客のオンボーディングプロセス設計。導入後サポート・カスタマーサクセス体制構築。アップセル・クロスセル機会の創出。顧客満足度向上とチャーン率削減施策。', ['契約・金融サポート', 'CXM戦略'], ['オンボーディングプロセス', 'カスタマーサクセス体制', 'アップセル戦略', 'チャーン分析'], '継続実行', ['顧客定着','売上拡大'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                カスタマーサクセス・オンボーディング
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="flow-arrow">🤝</div>
            
            <!-- フェーズ5: アフターサービス・継続改善 -->
            <div class="phase phase-5" data-phase="5">
                <div class="phase-header">
                    <div class="phase-title">
                        <div class="phase-icon" style="background: linear-gradient(135deg, #a55eea, #9b59b6);">5</div>
                        アフターサービス・継続改善フェーズ
                    </div>
                    <div class="phase-checkbox" onclick="togglePhase(this, event)">
                        ✓
                    </div>
                </div>
                <div class="departments">
                    <div class="department">
                        <div class="dept-title">
                            <div class="dept-icon support">C</div>
                            カスタマーサポート
                        </div>
                        <ul class="task-list">
                            <li class="task-item priority-high" onclick="showTaskDetail('24/7カスタマーサポート体制構築', 'オムニチャネル・カスタマーサポート（電話・メール・チャット・LINE等）の構築。AIチャットボット・FAQ自動応答システム導入。エスカレーション体制・専門技術者派遣体制の整備。顧客問い合わせ管理・ナレッジベース構築。', ['カスタマーサクセス体制'], ['サポート体制', 'AIチャットボット', 'FAQ システム', 'ナレッジベース'], '4週間', ['顧客満足度向上','問題解決効率化'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                24/7カスタマーサポート体制構築
                            </li>
                            <li class="task-item priority-high" onclick="showTaskDetail('予防保全・IoTメンテナンス', 'IoTセンサーによる設備状態監視・予防保全システム。AI予測分析による故障予兆検知。定期点検・メンテナンススケジュール自動化。リモート診断・遠隔メンテナンス機能の導入。', ['ペット共生機能開発', 'サポート体制構築'], ['IoT監視システム', '予防保全プログラム', 'AI予測分析', 'リモート診断機能'], '6週間', ['機器寿命延長','メンテナンス効率化'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                予防保全・IoTメンテナンス
                            </li>
                            <li class="task-item priority-medium" onclick="showTaskDetail('顧客満足度測定・改善', 'CSAT・NPS・CES（Customer Effort Score）定期測定。顧客インタビュー・フォーカスグループによる定性調査。ペット行動・健康状態追跡による満足度相関分析。VOC（Voice of Customer）分析と改善アクション。', ['CXM戦略', 'IoTメンテナンス'], ['満足度調査', 'VOC分析', 'ペット健康レポート', '改善アクションプラン'], '月次実行', ['顧客ロイヤルティ向上','サービス改善'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                顧客満足度測定・改善
                            </li>
                            <li class="task-item priority-medium parallel" onclick="showTaskDetail('コミュニティ・エンゲージメント強化', 'ペット飼い主コミュニティプラットフォーム構築・運営。ユーザー間情報交換・相互サポート促進。専門家（獣医師・トレーナー）によるオンラインセミナー・相談会開催。ユーザー参加型イベント・オフ会企画。', ['アドボカシーマーケティング', '満足度測定'], ['コミュニティプラットフォーム', '専門家ネットワーク', 'オンラインイベント', 'ユーザーイベント'], '継続運営', ['顧客エンゲージメント','ブランドロイヤルティ'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                コミュニティ・エンゲージメント強化
                            </li>
                            <li class="task-item priority-high" onclick="showTaskDetail('リテンション・アップセル戦略', '顧客生涯価値（LTV）最大化戦略。リニューアル・増築提案。ペット関連サービス（保険・医療・トレーニング等）の提携・紹介。家族構成変化・ペット増加に対応したソリューション提案。', ['コミュニティ強化', 'パートナーシップ戦略'], ['LTV最大化施策', 'アップセル提案', 'サービス連携', 'ライフステージ対応'], '継続実行', ['収益拡大','顧客関係深化'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                リテンション・アップセル戦略
                            </li>
                        </ul>
                    </div>
                    <div class="department">
                        <div class="dept-title">
                            <div class="dept-icon product">P</div>
                            商品開発
                        </div>
                        <ul class="task-list">
                            <li class="task-item priority-high parallel" onclick="showTaskDetail('データドリブン商品改良', '顧客利用データ・IoTデータ分析による商品改良点抽出。ペット行動パターン・健康データ分析結果の商品仕様反映。A/Bテストによる新機能効果検証。継続的改良サイクル（Plan-Do-Check-Act）の確立。', ['IoTメンテナンス', 'VOC分析'], ['データ分析レポート', '改良仕様書', 'A/Bテスト結果', '継続改良計画'], '継続実行', ['商品力向上','差別化強化'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                データドリブン商品改良
                            </li>
                            <li class="task-item priority-medium" onclick="showTaskDetail('次世代商品企画・ロードマップ', '市場トレンド・技術革新を踏まえた中長期商品ロードマップ策定。新技術（AI・IoT・バイオテクノロジー等）活用検討。ペット高齢化・多頭飼い等の社会変化対応商品企画。競合動向分析による先行商品開発戦略。', ['データドリブン改良', '市場分析'], ['商品ロードマップ', '新技術活用案', '社会変化対応策', '先行開発戦略'], '四半期更新', ['イノベーション','競争優位性'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                次世代商品企画・ロードマップ
                            </li>
                            <li class="task-item priority-medium" onclick="showTaskDetail('サステナビリティ・ESG対応', '環境負荷低減・サステナブル材料採用。ペットの健康・福祉向上への貢献可視化。地域社会・動物愛護団体との連携強化。ESG投資対応・サステナビリティレポート作成。', ['次世代商品企画'], ['サステナビリティ戦略', 'ESG指標', '環境負荷評価', 'サステナビリティレポート'], '年次更新', ['企業価値向上','社会貢献'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                サステナビリティ・ESG対応
                            </li>
                            <li class="task-item priority-high" onclick="showTaskDetail('イノベーション・R&D投資', '大学・研究機関との共同研究推進。ペット行動学・獣医学・建築学の最新研究成果活用。特許戦略・知的財産ポートフォリオ構築。オープンイノベーション・スタートアップ連携。', ['サステナビリティ対応'], ['R&D戦略', '共同研究契約', '特許ポートフォリオ', 'イノベーション提携'], '継続投資', ['技術的優位性','新価値創造'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                イノベーション・R&D投資
                            </li>
                            <li class="task-item priority-medium parallel" onclick="showTaskDetail('グローバル展開・スケーラビリティ', '海外市場（アジア・欧米）における ペット共生住宅需要調査。現地法規制・文化的差異対応の商品ローカライゼーション。グローバル・サプライチェーン構築。国際標準認証取得・海外パートナーシップ戦略。', ['イノベーション投資', 'パートナーシップ戦略'], ['海外市場調査', 'ローカライゼーション計画', 'グローバル戦略', '国際認証取得'], '長期計画', ['事業拡大','国際競争力'])">
                                <div class="task-checkbox" onclick="toggleTask(this, event)">✓</div>
                                グローバル展開・スケーラビリティ
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="progress-bar">
            <div class="progress-fill" id="overallProgress" style="width: 0%"></div>
        </div>
        <p style="text-align: center; color: #5d4e75; font-weight: 600; margin-top: 10px;">
            全体進捗: <span id="progressText">0%</span>
        </p>
        
        <div class="priority-legend">
            <h4>🎯 タスク優先度・相互関係ガイド</h4>
            <div class="priority-items">
                <div class="priority-item">
                    <div class="priority-indicator high"></div>
                    <span>高優先度 - クリティカルパス</span>
                </div>
                <div class="priority-item">
                    <div class="priority-indicator medium"></div>
                    <span>中優先度 - 重要タスク</span>
                </div>
                <div class="priority-item">
                    <div class="priority-indicator parallel"></div>
                    <span>並行実行可能 - 効率化対象</span>
                </div>
            </div>
        </div>
        
        <div class="legend">
            <h3>🌟 部門別役割ガイド（プロフェッショナル版）</h3>
            <div class="legend-items">
                <div class="legend-item">
                    <div class="legend-color marketing"></div>
                    <span>マーケティング (M) - 戦略的市場開拓・データドリブン施策・ROI最大化</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color branding"></div>
                    <span>ブランディング (B) - ブランド価値構築・体験設計・認知度向上</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color product"></div>
                    <span>商品開発 (P) - イノベーション創出・技術開発・競争優位性構築</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color sales"></div>
                    <span>営業 (S) - コンサルティング営業・チャネル戦略・収益最大化</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color support"></div>
                    <span>カスタマーサポート (C) - 顧客成功・LTV向上・満足度最大化</span>
                </div>
            </div>
        </div>
    </div>
    
    <!-- モーダルウィンドウ -->
    <div id="taskModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2 id="modalTitle"></h2>
            <div id="modalDescription"></div>
        </div>
    </div>
    
    <script>
        let currentPhase = 0;
        let completedTasks = new Set();
        let completedPhases = new Set();
        
        // タスクデータベース（依存関係管理用）
        const taskDatabase = {};
        
        function highlightCurrentPhase() {
            document.querySelectorAll('.phase').forEach(phase => {
                phase.style.transform = '';
                phase.style.boxShadow = '';
                phase.style.border = '';
            });
            
            currentPhase = (currentPhase % 5) + 1;
            const targetPhase = document.querySelector(`[data-phase="${currentPhase}"]`);
            
            if (targetPhase) {
                targetPhase.style.transform = 'scale(1.02)';
                targetPhase.style.boxShadow = '0 15px 50px rgba(255, 154, 158, 0.5)';
                targetPhase.style.border = '4px solid #ff6b9d';
                
                targetPhase.scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'center' 
                });
            }
            
            const statusElement = document.querySelector('.current-status');
            const phaseNames = [
                '',
                '市場調査・戦略策定',
                '商品開発・設計', 
                'マーケティング施策展開',
                '営業・販売活動',
                'アフターサービス・継続改善'
            ];
            
            statusElement.innerHTML = `
                <span class="status-indicator"></span>
                現在のフェーズ: ${phaseNames[currentPhase]}
            `;
        }
        
        function toggleTask(checkbox, event) {
            event.stopPropagation();
            const taskItem = checkbox.parentElement;
            const taskText = taskItem.textContent.trim();
            
            if (completedTasks.has(taskText)) {
                completedTasks.delete(taskText);
                checkbox.classList.remove('checked');
                taskItem.classList.remove('completed');
            } else {
                completedTasks.add(taskText);
                checkbox.classList.add('checked');
                taskItem.classList.add('completed');
                
                // 完了時にアニメーション効果
                taskItem.style.transform = 'scale(1.02)';
                setTimeout(() => {
                    taskItem.style.transform = '';
                }, 300);
            }
            
            updateProgress();
            updateDependencies();
        }
        
        function togglePhase(checkbox, event) {
            event.stopPropagation();
            const phase = checkbox.closest('.phase');
            const phaseNumber = phase.getAttribute('data-phase');
            
            if (completedPhases.has(phaseNumber)) {
                completedPhases.delete(phaseNumber);
                checkbox.classList.remove('checked');
                phase.classList.remove('completed');
            } else {
                completedPhases.add(phaseNumber);
                checkbox.classList.add('checked');
                phase.classList.add('completed');
            }
            
            updateProgress();
        }
        
        function updateProgress() {
            const totalTasks = document.querySelectorAll('.task-item').length;
            const completedTasksCount = completedTasks.size;
            const progressPercentage = Math.round((completedTasksCount / totalTasks) * 100);
            
            document.getElementById('overallProgress').style.width = progressPercentage + '%';
            document.getElementById('progressText').textContent = progressPercentage + '%';
        }
        
        function updateDependencies() {
            // 依存関係の可視化ロジック（今後拡張可能）
            // 完了したタスクに基づいて、次に取り組むべきタスクをハイライト
        }
        
        function showTaskDetail(title, description, dependencies = [], deliverables = [], timeline = '', relatedTasks = []) {
            document.getElementById('modalTitle').textContent = title;
            
            let dependencyHtml = '';
            if (dependencies.length > 0) {
                dependencyHtml = `
                    <div class="task-detail dependencies">
                        <h4>🔗 前提となるタスク</h4>
                        <ul>
                            ${dependencies.map(dep => `<li>${dep}</li>`).join('')}
                        </ul>
                    </div>
                `;
            }
            
            let deliverablesHtml = '';
            if (deliverables.length > 0) {
                deliverablesHtml = `
                    <div class="task-detail deliverables">
                        <h4>📋 成果物・アウトプット</h4>
                        <ul>
                            ${deliverables.map(item => `<li>${item}</li>`).join('')}
                        </ul>
                    </div>
                `;
            }
            
            let relatedTasksHtml = '';
            if (relatedTasks.length > 0) {
                relatedTasksHtml = `
                    <div class="task-detail timeline">
                        <h4>🔄 並行・連携すべきタスク</h4>
                        <ul>
                            ${relatedTasks.map(task => `<li>${task}</li>`).join('')}
                        </ul>
                    </div>
                `;
            }
            
            document.getElementById('modalDescription').innerHTML = `
                <div class="task-detail content">
                    <h4>📝 詳細内容</h4>
                    <p>${description}</p>
                </div>
                ${dependencyHtml}
                ${deliverablesHtml}
                <div class="task-detail timeline">
                    <h4>⏰ 推奨実施期間</h4>
                    <p>${timeline}</p>
                </div>
                ${relatedTasksHtml}
            `;
            document.getElementById('taskModal').style.display = 'block';
        }
        
        function closeModal() {
            document.getElementById('taskModal').style.display = 'none';
        }
        
        window.onclick = function(event) {
            const modal = document.getElementById('taskModal');
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        }
        
        document.querySelectorAll('.phase').forEach((phase, index) => {
            phase.addEventListener('click', (e) => {
                if (!e.target.classList.contains('phase-checkbox') && 
                    !e.target.classList.contains('task-checkbox') &&
                    !e.target.closest('.task-item')) {
                    currentPhase = index + 1;
                    highlightCurrentPhase();
                }
            });
        });
        
        setTimeout(() => {
            highlightCurrentPhase();
        }, 1000);
    </script>
</body>
</html>